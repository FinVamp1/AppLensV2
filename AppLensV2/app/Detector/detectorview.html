<md-card>

    <div flex>
        <md-toolbar style="min-height:40px;background-color:#F4F4F4;color:rgb(0,150,136)">
            <h5 style="margin:auto 10px auto;font-weight:500">{{detectorviewctrl.info.DisplayName}}</h5>
        </md-toolbar>
        <div layout-padding>

            <div ng-if="detectorviewctrl.loading" layout="row" layout-sm="column" layout-align="space-around" style="height:30%">

                <div layout="column" layout-align="center center">
                    <md-progress-circular md-mode="indeterminate" md-diameter="40"></md-progress-circular>
                </div>
            </div>

            <md-tabs md-dynamic-height md-border-bottom ng-if="!detectorviewctrl.loading">
                <md-tab label="Metrics">
                    <md-tab-label>
                        Metrics
                    </md-tab-label>
                    <md-tab-body>
                        <nvd3 options="detectorviewctrl.chartoptions" data="detectorviewctrl.chartdata"
                              ng-if="detectorviewctrl.info.Name != 'instanceallocations'"></nvd3>
                        <table style="width: 100%; border-spacing: 1px; padding-right: 25px; border-collapse: separate;" 
                               ng-if="detectorviewctrl.info.Name == 'instanceallocations'">
                            <tr ng-repeat="instance in detectorviewctrl.chartdata">
                                <td class="small" style="width: 55px;">
                                    <span style="font-size: 10px;">{{instance.key|worker}}</span>
                                </td>
                                <td ng-repeat="change in instance.values" data-toggle="tooltip"
                                     ng-style="{'background-color':(change.y == 1?'#009933':'#efefef')}"
                                    data-placement="top" title="{{instance.key}} | {{change.x}}">
                                    <span style="font-size: 1px;">.</span>
                                </td>

                            </tr>
                        </table>
                    </md-tab-body>

                </md-tab>
                <md-tab>
                    <md-tab-label>
                        Additional Data
                    </md-tab-label>

                </md-tab>
                <md-tab>
                    <md-tab-label>
                        Solution <md-badge ng-show="detectorviewctrl.solutionContent === ''" class="md-warn">!</md-badge>
                    </md-tab-label>
                     <md-tab-body>
                         <div btf-markdown="detectorviewctrl.solutionContent" class="markdown">
                         </div>
                     </md-tab-body>

                </md-tab>
                <md-tab>
                    <md-tab-label>
                        Data source
                    </md-tab-label>
                    <md-tab-body>
                        <li ng-repeat="instruction in detectorviewctrl.responsemetadata.DataSource.Instructions" class="markdown">
                            {{instruction}}
                        </li>
                        <li ng-repeat="uri in detectorviewctrl.responsemetadata.DataSource.DataSourceUri" class="markdown">
                            <a href="{{uri.Value}}" target="_blank">{{uri.Name}}</a>
                        </li>
                    </md-tab-body>
                </md-tab>
                <md-tab>
                    <md-tab-label>
                        Wiki <md-badge ng-show="detectorviewctrl.wikiContent === ''" class="md-warn">!</md-badge>
                    </md-tab-label>
                    <md-tab-body>
                        <div btf-markdown="detectorviewctrl.wikiContent" class="markdown">
                        </div>
                    </md-tab-body>

                </md-tab>
            </md-tabs>

        </div>

    </div>
</md-card>

